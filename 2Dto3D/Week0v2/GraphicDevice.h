#pragma once

#pragma comment(lib, "user32")
#pragma comment(lib, "d3d11")
#pragma comment(lib, "d3dcompiler")

#include <windows.h>
#include <d3d11.h>
#include <d3dcompiler.h>

class FGraphicsDevice {
public:
    ID3D11Device*               Device = nullptr;
    ID3D11DeviceContext*        DeviceContext = nullptr;
    IDXGISwapChain*             SwapChain = nullptr;
    ID3D11Texture2D*            FrameBuffer = nullptr;
    ID3D11RenderTargetView*     FrameBufferRTV = nullptr;
    ID3D11RasterizerState*      RasterizerState = nullptr;

    // Depth-Stencil 관련 변수
    ID3D11Texture2D*            DepthStencilBuffer = nullptr;  // 깊이/스텐실 텍스처
    ID3D11DepthStencilView*     DepthStencilView = nullptr;  // 깊이/스텐실 뷰
    ID3D11DepthStencilState*    DepthStencilState = nullptr;

    FLOAT ClearColor[4] = { 0.025f, 0.025f, 0.025f, 1.0f }; // 화면을 초기화(clear) 할 때 사용할 색상(RGBA)
    
    D3D11_VIEWPORT ViewportInfo;

public:
    void Initialize(HWND hWindow);
    void Release();

    void CreateDeviceAndSwapChain(HWND hWindow);
    void ReleaseDeviceAndSwapChain();
    void CreateFrameBuffer(HWND hWindow);
    void ReleaseFrameBuffer();
    void CreateDepthStencilBuffer(HWND hWindow);
    void ReleaseDepthStencilBuffer();
    void CreateDepthStencilState(HWND hWindow);
	void ReleaseDepthStencilState();
	void CreateRasterizerState(HWND hWindow);
	void ReleaseRasterizerState();
    
    void SwapBuffer();
    
    void Prepare();

    void OnResize(HWND hWindow, float& aspectRatio);
};

